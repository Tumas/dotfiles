#!/bin/bash

# Script that set particular pyrocms directories writable

if [ -n "$1" ]; then
  path=$1
else
  echo "Error: You must specify project root"
  exit 
fi

if [ ! -d $path ]; then
  echo "Error: No such directory : " $path
  exit
fi
cd $path

if [ -d 'codeigniter' ]; then
  cd 'codeigniter'
  for dir in cache logs ; do
    if [ -d $dir ]; then
      chmod a+w $dir
      echo $dir " updated " 
    fi
  done
  cd '..'
else
  echo "codeigniter category does not exist"
fi

if [ -d 'application' ]; then
  cd 'application'
  for dir in cache cache/dwoo cache/dwoo/compiled cache/simplepie uploads assets/img/photos uploads/assets uploads/assets/cache ; do
    if [ -d $dir ]; then
      chmod a+w $dir
      echo $dir " updated "
    fi
  done

  for cfg in config/config.php config/database.php ; do
    if [ -e $cfg ]; then
      chmod 666 $cfg
      echo $cfg " updated "
    fi
  done
else
  echo "application category does not exist"
fi
